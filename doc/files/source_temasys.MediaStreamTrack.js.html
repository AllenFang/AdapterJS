<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>source/temasys.MediaStreamTrack.js - adapterjs</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="adapterjs" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.10.5</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/AdapterJS.html">AdapterJS</a></li>
                                <li><a href="../classes/MediaStream.html">MediaStream</a></li>
                                <li><a href="../classes/MediaStreamTrack.html">MediaStreamTrack</a></li>
                                <li><a href="../classes/WebRTCPlugin.html">WebRTCPlugin</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: source/temasys.MediaStreamTrack.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
// Polyfill all MediaStream objects
var polyfillMediaStreamTrack = null;

// Return the event payload
var returnEventPayloadFn = function (track) {
  return {
    bubbles: false,
    cancelBubble: false,
    cancelable: false,
    currentTarget: track,
    defaultPrevented: false,
    eventPhase: 0,
    returnValue: true,
    srcElement: track,
    target: track,
    timeStamp: (new Date()).getTime()
  };
};

if (navigator.mozGetUserMedia) {

  /**
   * The polyfilled MediaStreamTrack class.
   * @class MediaStreamTrack
   * @since 0.10.5
   */
	polyfillMediaStreamTracks = function (track) {

    /**
     * The MediaStreamTrack object id.
     * @attribute id
     * @type String
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.id = track.id || (new Date()).getTime().toString();

    /**
     * The MediaStreamTrack object label.
     * @attribute label
     * @type String
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.label = track.label || track.kind &#x27;-&#x27; + track.id;

    /**
     * The flag that indicates if a MediaStreamTrack object has ended.
     * @attribute ended
     * @type Boolean
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.ended = false;

    /**
     * The flag that indicates if a MediaStreamTrack object is enabled.
     * - Set it to &lt;code&gt;true&lt;/code&gt; for enabled track stream or set it to
     *   &lt;code&gt;false&lt;/code&gt; for disable track stream.
     * @attribute enabled
     * @type Boolean
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.enabled = true;

    /**
     * The flag that indicates if a MediaStreamTrack object is muted.
     * @attribute muted
     * @type Boolean
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.muted = typeof track.muted === &#x27;boolean&#x27; ? track.muted : false;

    /**
     * The ready state status of a MediaStreamTrack object.
     * @attribute readyState
     * @type String
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.readyState = typeof track.readyState === &#x27;string&#x27; ? track.readyState : &#x27;live&#x27;;

    /**
     * The MediaStreamTrack object type.
     * - &lt;code&gt;&quot;audio&quot;&lt;/code&gt;: The MediaStreamTrack object type is an audio track.
     * - &lt;code&gt;&quot;video&quot;&lt;/code&gt;: The MediaStreamTrack object type is an video track.
     * @attribute kind
     * @type String
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    //track.kind = track.kind;

    /**
     * The status if a MediaStreamTrack object is read only and cannot to be overwritten.
     * @attribute readOnly
     * @type Boolean
     * @readOnly
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.readOnly = typeof track.readOnly === &#x27;boolean&#x27; ? track.readOnly : false;

    /**
     * Event triggered when MediaStreamTrack has ended streaming.
     * @event onended
     * @param {String} type The type of event: &lt;code&gt;&quot;ended&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onended = null;

    /**
     * Event triggered when MediaStreamTrack has started streaming.
     * @event onstarted
     * @param {String} type The type of event: &lt;code&gt;&quot;started&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onstarted = null;

    /**
     * Event triggered when MediaStreamTrack has been muted.
     * @event onmute
     * @param {String} type The type of event: &lt;code&gt;&quot;mute&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onmute = null;

    /**
     * Event triggered when MediaStreamTrack has been unmuted.
     * @event onunmute
     * @param {String} type The type of event: &lt;code&gt;&quot;unmute&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onunmute = null;

    /**
     * Event triggered when MediaStreamTrack is over constrained.
     * @event onoverconstrained
     * @param {String} type The type of event: &lt;code&gt;&quot;overconstrained&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onoverconstrained = null;

    /**
     * Event triggered when a feature in the MediaStreamTrack is not supported
     *   but used.
     * @event onunsupported
     * @param {String} feature The feature that is not supported. &lt;i&gt;Eg. &lt;code&gt;&quot;stop&quot;&lt;/code&gt;&lt;/i&gt;.
     * @param {Object} error The error received natively.
     * @param {String} type The type of event: &lt;code&gt;&quot;unsupported&quot;&lt;/code&gt;.
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.onunsupported = null;

    /**
     * Stops a MediaStreamTrack streaming.
     * @method polystop
     * @for MediaStreamTrack
     * @since 0.10.6
     */
    track.polystop = function () {
      track.stop();
      track.ended = true;

      if (typeof track.onended === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;ended&#x27;;
        track.onended(eventPayload);
      }
    };


    setTimeout(function () {
      if (typeof track.onstarted === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;started&#x27;;
        track.onstarted(eventPayload);
      }
    }, 370);
  };


} else if (navigator.webkitGetUserMedia) {

  polyfillMediaStreamTracks = function (track) {

    track.id = track.id || (new Date()).getTime().toString();

    track.label = track.label || track.kind + &#x27;-&#x27; + track.id;

    track.ended = false;

    track.enabled = true;

    track.muted = typeof track.muted === &#x27;boolean&#x27; ? track.muted : false;

    track.readyState = typeof track.readyState === &#x27;string&#x27; ? track.readyState : &#x27;live&#x27;;

    //track.kind = track.kind;

    track.readOnly = typeof track.readOnly === &#x27;boolean&#x27; ? track.readOnly : false;

    track.onended = null;

    track.onstarted = null;

    track.onmute = null;

    track.onunmute = null;

    track.onoverconstrained = null;

    track.onunsupported = null;

    track.polystop = function () {
      track.stop();
      track.ended = true;

      if (typeof track.onended === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;ended&#x27;;
        track.onended(eventPayload);
      }
    };


    setTimeout(function () {
      if (typeof track.onstarted === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;started&#x27;;
        track.onstarted(eventPayload);
      }
    }, 370);
  };

} else {

  polyfillMediaStreamTracks = function (track) {

    track.id = track.id || (new Date()).getTime().toString();

    track.label = track.label || track.kind + &#x27;-&#x27; + track.id;

    track.ended = false;

    track.enabled = true;

    track.muted = typeof track.muted === &#x27;boolean&#x27; ? track.muted : false;

    track.readyState = typeof track.readyState === &#x27;string&#x27; ? track.readyState : &#x27;live&#x27;;

    //track.kind = track.kind;

    track.readOnly = typeof track.readOnly === &#x27;boolean&#x27; ? track.readOnly : false;

    track.onended = null;

    track.onstarted = null;

    track.onmute = null;

    track.onunmute = null;

    track.onoverconstrained = null;

    track.onunsupported = null;

    track.polystop = function () {
      if (typeof track.onunsupported === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;unsupported&#x27;;
        eventPayload.error = error;
        eventPayload.feature = &#x27;stop&#x27;;
        track.onunsupported(eventPayload);
      }
    };

    setTimeout(function () {
      if (typeof track.onstarted === &#x27;function&#x27;) {
        var eventPayload = returnEventPayloadFn(track);
        eventPayload.type = &#x27;started&#x27;;
        track.onstarted(eventPayload);
      }
    }, 370);

    return track;
  };
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
